generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./awa.db"
}

model HumanTask {
  id            String    @id @default(uuid())
  activity_id   String
  activity_name String
  token_id      String
  workflow_id   String
  status        String    @default("pending") // pending, assigned, in_progress, completed, rejected, expired
  priority      String    @default("normal")  // low, normal, high, critical
  assignee_id   String?
  role_id       String
  creator_id    String?
  creator_type  String?     // human, ai_agent, robot, application
  assigner_id   String?
  assigner_type String?     // human, ai_agent, robot, application
  inputs        String    // JSON string
  outputs       String?   // JSON string
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt
  due_at        DateTime?
  completed_at  DateTime?
  description   String?
  form_schema   String?   // JSON string
  tags          String?   // JSON string array
}

model WorkflowExecution {
  id              String   @id @default(uuid())
  workflow_id     String
  workflow_name   String
  status          String   // completed, failed
  started_at      DateTime
  completed_at    DateTime @default(now())
  duration_ms     Int
  input_tokens    Int      @default(0)
  output_tokens   Int      @default(0)
  total_tokens    Int      @default(0)
  execution_cost  Float    @default(0)
  currency        String   @default("USD")
  steps_count     Int      @default(0)
  user_id         String?
  metadata        String?  // JSON string
}
